{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTargetRect = getTargetRect;\nexports.getFixedTop = getFixedTop;\nexports.getFixedBottom = getFixedBottom;\nexports.getObserverEntities = getObserverEntities;\nexports.addObserveTarget = addObserveTarget;\nexports.removeObserveTarget = removeObserveTarget;\n\nvar _addEventListener = _interopRequireDefault(require(\"rc-util/lib/Dom/addEventListener\"));\n\nfunction getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\n\nfunction getFixedTop(placeholderReact, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderReact.top - offsetTop) {\n    return offsetTop + targetRect.top;\n  }\n\n  return undefined;\n}\n\nfunction getFixedBottom(placeholderReact, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderReact.bottom + offsetBottom) {\n    var targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return offsetBottom + targetBottomOffset;\n  }\n\n  return undefined;\n} // ======================== Observer ========================\n\n\nvar TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nvar observerEntities = [];\n\nfunction getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\n\nfunction addObserveTarget(target, affix) {\n  if (!target) return;\n  var entity = observerEntities.find(function (item) {\n    return item.target === target;\n  });\n\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target: target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity); // Add listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      entity.eventHandlers[eventName] = (0, _addEventListener[\"default\"])(target, eventName, function () {\n        entity.affixList.forEach(function (targetAffix) {\n          targetAffix.lazyUpdatePosition();\n        });\n      });\n    });\n  }\n}\n\nfunction removeObserveTarget(affix) {\n  var observerEntity = observerEntities.find(function (oriObserverEntity) {\n    var hasAffix = oriObserverEntity.affixList.some(function (item) {\n      return item === affix;\n    });\n\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n        return item !== affix;\n      });\n    }\n\n    return hasAffix;\n  });\n\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(function (item) {\n      return item !== observerEntity;\n    }); // Remove listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      var handler = observerEntity.eventHandlers[eventName];\n\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}","map":{"version":3,"sources":["C:/Users/FR/Desktop/redux_study/node_modules/antd/lib/affix/utils.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","getTargetRect","getFixedTop","getFixedBottom","getObserverEntities","addObserveTarget","removeObserveTarget","_addEventListener","target","window","getBoundingClientRect","top","bottom","innerHeight","placeholderReact","targetRect","offsetTop","undefined","offsetBottom","targetBottomOffset","TRIGGER_EVENTS","observerEntities","affix","entity","find","item","affixList","push","eventHandlers","forEach","eventName","targetAffix","lazyUpdatePosition","observerEntity","oriObserverEntity","hasAffix","some","filter","length","handler","remove"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTargetRect = getTargetRect;\nexports.getFixedTop = getFixedTop;\nexports.getFixedBottom = getFixedBottom;\nexports.getObserverEntities = getObserverEntities;\nexports.addObserveTarget = addObserveTarget;\nexports.removeObserveTarget = removeObserveTarget;\n\nvar _addEventListener = _interopRequireDefault(require(\"rc-util/lib/Dom/addEventListener\"));\n\nfunction getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\n\nfunction getFixedTop(placeholderReact, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderReact.top - offsetTop) {\n    return offsetTop + targetRect.top;\n  }\n\n  return undefined;\n}\n\nfunction getFixedBottom(placeholderReact, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderReact.bottom + offsetBottom) {\n    var targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return offsetBottom + targetBottomOffset;\n  }\n\n  return undefined;\n} // ======================== Observer ========================\n\n\nvar TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nvar observerEntities = [];\n\nfunction getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\n\nfunction addObserveTarget(target, affix) {\n  if (!target) return;\n  var entity = observerEntities.find(function (item) {\n    return item.target === target;\n  });\n\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target: target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity); // Add listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      entity.eventHandlers[eventName] = (0, _addEventListener[\"default\"])(target, eventName, function () {\n        entity.affixList.forEach(function (targetAffix) {\n          targetAffix.lazyUpdatePosition();\n        });\n      });\n    });\n  }\n}\n\nfunction removeObserveTarget(affix) {\n  var observerEntity = observerEntities.find(function (oriObserverEntity) {\n    var hasAffix = oriObserverEntity.affixList.some(function (item) {\n      return item === affix;\n    });\n\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n        return item !== affix;\n      });\n    }\n\n    return hasAffix;\n  });\n\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(function (item) {\n      return item !== observerEntity;\n    }); // Remove listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      var handler = observerEntity.eventHandlers[eventName];\n\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}"]},"metadata":{},"sourceType":"script"}